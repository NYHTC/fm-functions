<fmxmlsnippet type="FMObjectList">
	<CustomFunction id="2" functionArity="2" visible="True" parameters="recordOrgNum;recordPubFlag" name="_Access_canView">
		<Calculation><![CDATA[// _Access_canView ( recordOrgNum, recordPubFlag )
// version 1.4, NYHTC

/*
	Determine if the user can view a record, setting the OrgNum (and creating a record FOR that), as needed.


SCHEMA:
	_ext_00ZZ_SESSION::zgAutoOrgNum


REQUIRES:
	_Access_MultiTenant_isActive


HISTORY:
	1.4 - 2017-09-22 ( eshagdar ): if the record is logically deleted, it should NEVER show. use privSet suffix to check orgNum.
	1.3.2 - 2017-01-26 ( eshagdar ): updated docuemntation with schema requirenments.
	1.3.1 - 2016-09-29 ( eshagdar ): updated documentation.
	1.3 - 201x-xx-xx ( xxxxx ): remove all SQL since it fails in Find mode. Compare record's OrgNum to session's OrgNum ( in a00_TimesSq ).
	1.2 - 201x-xx-xx ( xxxxx ): Set local file's global orgNum if needed ( create Interface record if one doesn't exist, otherwise just set it ).
	1.1 - 201x-xx-xx ( xxxxx ): 
	1.0 - 201x-xx-xx ( xxxxx ): first created.
*/


Case ( 
	/* NEVER show - logically deleted */
	recordPubFlag = 4;
	False;

	/* no multi-tenant split */
	not _Access_MultiTenant_isActive; 
	True; 

	/* show only if the orgNum of the user matches the orgNum of the record */
	not IsEmpty ( recordOrgNum  ) 
	  and 
	recordOrgNum = GetAsNumber ( Right ( Get ( AccountPrivilegeSetName ) ; 1 ) )
)]]>
		</Calculation>
	</CustomFunction>
</fmxmlsnippet>